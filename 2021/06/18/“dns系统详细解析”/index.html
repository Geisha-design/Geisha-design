<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="雨争齐齐齐"><title>DNS系统详细解析 | STELLAR-SECRET</title><link rel="stylesheet" type="text/css" href="../../../../css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="../../../../css/dark.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="../../../../favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="../../../../favicon.ico"><link rel="apple-touch-icon" href="../../../../apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="../../../../apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">DNS系统详细解析</h1><a id="logo" href="../../../../.">STELLAR-SECRET</a><p class="description">穿梭时间的画面的钟，从反方向开始移动</p></div><div id="nav-menu"><a class="current" href="../../../../."><i class="fa fa-home"> Home</i></a><a href="../../../../archives/"><i class="fa fa-archive"> Archive</i></a><a href="../../../../about/"><i class="fa fa-user"> About</i></a><a href="../../../../memory/"><i class="fa fa-rss"> Memory</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">DNS系统详细解析</h1><div class="post-meta">2021-06-18</div><div class="post-content"><p>DNS系统概述：域名系统DNS（domain name system）是因特网使用的命名系统，用来把便于人们记忆的含有特定含义的主机名转换为便于机器处理的IP地址，值得注意的是，DNS系统采用C/S架构，其协议运行在UDP之上，使用53号端口。DNS分为三个部分，层次域名空间，域名服务器和解析器。层次域名空间：因特网采用层次树状结构的命名方法。任何一个连接在因特网上的主机或者路由器，都有一个唯一的层次结构的名字，即域名（Domain name）域是名字空间中一个可以被管理的划分。域还可以被分为子域，而子域还可以继续划分为子域的子域，这样就形成了顶级域，二级域，三级域等。每一个域名都是由标号序列组成，各标号之间用点“.“”隔开。<br>举个例子：<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 其中com是顶级域名，cskaoyan是二级域名，www是三级域名。<br>关于域名中的标号有以下几点值得注意：<br>1.英文不区分大小写。<br>2.标号中除了连字符-之外不能使用其他的标点符号。<br>3.每一个标号不超过63个字符，多标号组成的完整域名最长不超过255字符。<br>4.级别最低的域名写在最左边，级别最高的顶级域名写在最右边。</p>
<p>顶级域名（Top name domain TLD）：有以下大三类<br>1.国家级顶级域名nTLD，国家和某些地区的域名，如“.cn”表示中国，“.us”表示美国，“.uk”表示英国，“.hk”表示中国香港特区。<br>2.通用顶级域名gTLD.常见的有“.com”（公司企业）“.net”（网络服务机构）“.org”（非营利性的组织）“.gov”（美国的政府部门）等。<br>3.基础结构域名。这种顶级域名只有一个，即arga，用于反向域名解析，因此又称为反向域名。<br>国家顶级域名注册的二级域名均由国家自行确定。下图是域名空间的结构<img src="https://img-blog.csdnimg.cn/20181227145035233.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FhMTkyODk5Mjc3Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>在域名系统中，每个域分别由不同的组织进</p>
<p>在域名系统中，每个域分别由不同的组织进行管理，每个组织都可以将它的域再分成一定数目的子域，并将这些子域委托给其他组织去管理。例如，管理CN域的中国将EDU.CN子域授权给中国教育和科研计算机网CERNET来管理。<br>域名服务器</p>
<p>因特网的域名系统被设计成一个联机分布式的数据库系统，并采用客户/服务器模式。域名到IP地址的解析是在域名服务器上进行的，一个服务器所负责（或者说是有权限的）的管辖范围称为区（不是以“域”为单位），各单位根据具体情况来划分自己管辖范围的区，但在一个区中的所有节点必须是能够连通的，每一个区设置相应的权限域名服务器，用来保护该区中的所有主机的域名IP地址的映射。每一个域名服务器不但能够进行一些域名到IP地址的解析，而且还必须具有连向其他域名服务器的信息，当自己不能进行域名到IP地址的转换时，能够知道什么地方去找别的域名服务器。</p>
<p>1.根域名服务器</p>
<p>根域名服务器是最高层次的域名服务器，所有的根域名服务器都知道所有的顶级域名服务器的IP地址。根域名服务器也是最重要的域名服务器，不管是哪一个本地域名服务器，若要对因特网上任何一个域名进行解析，只要自己无法解析，就首先要求助于根域名服务器。因特网上有着13个根域名服务器，尽管我们将这13个根域名服务器中的每个都是为单个的服务器，但每台“服务器”实际上是冗余服务器的集群，以提供安全性和可靠性。需要注意的是，根域名服务器用来管辖顶级域（.com）通常它并不直接把待查询的域名直接转换成IP地址，而是告诉本地域名服务器下一步应当照拿一个顶级域名服务器进行查询。</p>
<p>2.顶级域名服务器<br>这些域名服务器负责管理在该顶级域名服务器注册的二级域名。当收到DNS查询请求时，就给出相应的回答（可能是最后的结果，也可能是下一步应当查找的域名服务器的IP地址）。</p>
<p>3.授权域名服务器（权限域名服务器）<br>每一个主机都必须在授权域名服务器处登记，为了更加可靠地工作，一个主机最好至少有两个授权域名服务器，实际上，许多域名服务器都同时充当本地域名服务器和授权域名服务器。授权域名服务器总是能够将其管辖的主机名的IP地址。</p>
<p>4.本地域名服务器<br>本地域名服务器对域名系统非常重要，每一个因特网服务提供者ISP，或一个大学，甚至一个大学里的系，都可以拥有一个本地域名服务器，当一个主机发出DNS查询请求时，这个查询请求报文就发送给该主机的本地域名服务器。事实上，我们在Windows系统中配置“本地连接”时，就需要填写DNS服务器地址，这个地址就是本地DNS域名服务器的地址。<br>DNS域名服务器的层次结构如图：</p>
<p> <img src="https://img-blog.csdnimg.cn/20181227150929581.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FhMTkyODk5Mjc3Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id><a href="#" class="headerlink" title></a></h2><p>域名解析过程</p>
<p>域名解析也就是把域名映射成IP地址或者把IP地址映射成为域名的过程。前者称为正向解析，后者称为反向解析。当客户端需要域名解析时，通过本机的DNS客户端构造一个DNS请求报文，以UDP数据报方式发往本地域名服务器。</p>
<p>域名解析有两种方式：递归查询和迭代相结合的查询。<br>递归查询的过程如图所示，该方式由于给根域名服务器的负载过大，几乎不使用。</p>
<p> <img src="https://img-blog.csdnimg.cn/20181227151325924.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FhMTkyODk5Mjc3Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://img-blog.csdnimg.cn/20181227151342382.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FhMTkyODk5Mjc3Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>（1）主机向本地域名服务器的查询采用的是递归查询。<br>如果本地主机所询问的本地域名服务器不知道被查询的域名IP地址，那么本地域名服务器就以DNS客户的身份，向根域名服务器继续发出查询请求报文（替该主机继续查询）<br>而不是让该主机自己进行下一步查询。在这种情况下，本地域名服务器只需要向根域名服务器查询一次，后面的几次查询都是递归地在其他几个域名服务器之间的进行的，在步骤7中，本地域名服务器从根域名服务器得到了所需要得IP地址，最后一步，本地域名服务器把查询结果告诉了主机。</p>
<p>（2）本地域名服务器向根域名服务器的查询采用迭代查询。<br>当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么给出所要查询的IP地址，要么告诉本地域名服务器“下一步应当向哪一个顶级域名服务器进行查询”然后让本地域名服务器向这个顶级域名服务器进行后续的查询。同样，顶级域名服务器收到查询报文后，要么给出所要查询的IP地址，要么告诉本地域名服务器下一步应当向哪一个权限域名服务器查询。最后返还结果。</p>
<p>举个例子：<br>某主机希望获得y.abc.com的主机的IP地址，域名解析过程如下（共使用八个UDP报文）<br>1.客户机向本地域名服务器发出DNS请求报文。<br>2.本地域名服务器收到请求后，查询本地缓存，假设没有该记录，则以DNS客户的身份向根域名服务器发出解析请求。<br>3.根域名服务器收到请求后，判断该域名属于.com域，将对应的顶级域名服务器dns.com的IP地址返回给本地域名服务器。<br>4.本地域名服务器向顶级域名服务器dns.com发出解析请求报文<br>5.顶级域名服务器dns.com收到请求后，判断该域名属于abc.com域，故将对应的授权域名服务器dns.abc.com的IP地址返回给本地域名服务器。<br>6.本地域名服务器想授权域名服务器发起解析请求报文。<br>7.授权域名服务器dns.abc.com收到请求后，将查询结果返回给本地域名服务器。<br>8.本地域名服务器将查询结果保存到本地缓存，同时返回给客户机。<br>为了提供DNS的查询效率，减少因特网上的DNS查询报文数量，在域名服务器中广泛地使用了高速缓存，当一个DNS服务器接收到DNS查询结果是，它能将该DNS信息缓存在高速缓存中。这样，当另一个相同的域名查询到大概DNS服务器是，该服务器就能够直接提供所要求的IP地址，而不需要再去向其他DNS服务器询问了，因为主机名和IP地址之间的映射不是永久的，所以DNS服务器将在一段时间后丢弃高速缓存中的信息。</p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="../../../08/21/port%E2%80%9C%E5%AD%97%E4%BD%93%E2%80%9D/">主题字体的修改</a><a class="next" href="../../../05/03/%E2%80%9C%E5%8D%97%E4%BA%AC%E5%8F%8B%E8%AE%B0-%E6%9D%8E%E5%AE%B6%E9%A6%A8%E2%80%9D/">南京友记</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://example.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../../../../categories/java/">java</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E7%94%9F%E6%B4%BB/">生活</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%B8%B8%E8%AF%86/">计算机常识</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6/">高等数学</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="../../../../tags/rails/" style="font-size: 15px;">rails</a> <a href="../../../../tags/web/" style="font-size: 15px;">web</a> <a href="../../../../tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 15px;">数据结构</a> <a href="../../../../tags/java/" style="font-size: 15px;">java</a> <a href="../../../../tags/%E8%89%BA%E6%9C%AF%E5%AE%B6/" style="font-size: 15px;">艺术家</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="../../../08/21/port%E2%80%9C%E5%AD%97%E4%BD%93%E2%80%9D/">主题字体的修改</a></li><li class="post-list-item"><a class="post-list-link" href="">DNS系统详细解析</a></li><li class="post-list-item"><a class="post-list-link" href="../../../05/03/%E2%80%9C%E5%8D%97%E4%BA%AC%E5%8F%8B%E8%AE%B0-%E6%9D%8E%E5%AE%B6%E9%A6%A8%E2%80%9D/">南京友记</a></li><li class="post-list-item"><a class="post-list-link" href="../../../05/01/%E5%8D%97%E4%BA%AC%E4%B9%8B%E6%97%85-episode-1/">南京之旅-中山陵</a></li><li class="post-list-item"><a class="post-list-link" href="../../../04/24/%E2%80%9C%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E2%80%9D/">计算机文件系统</a></li><li class="post-list-item"><a class="post-list-link" href="../../../04/22/%E2%80%9C%E5%B9%82%E7%BA%A7%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8%E2%80%9D/">幂级数的本质</a></li><li class="post-list-item"><a class="post-list-link" href="../../../04/16/%E2%80%9C%E5%9D%82%E6%9C%AC%E9%BE%99%E4%B8%80%E5%85%88%E7%94%9F%E5%AF%B9%E6%88%91%E7%9A%84%E5%BD%B1%E5%93%8D%E2%80%9D/">坂本龙一先生对我的影响</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2020/11/29/%E5%9B%9B%E7%A7%8DJavaEE%E6%9E%B6%E6%9E%84%E7%AE%80%E4%BB%8B/">四种JavaEE架构简介</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2020/11/19/kmp%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90/">kmp算法解析</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2020/02/12/%E2%80%9CRail%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%9D/">Rails学习笔记-11.2</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://github.com/Geisha-design/" title="雨争齐齐齐的github" target="_blank">雨争齐齐齐的github</a><ul></ul><a href="https://blog.csdn.net/weixin_30821731/article/details/96861385?utm_source=app/" title="如果天空不死的信息整理" target="_blank">如果天空不死的信息整理</a><ul></ul><a href="https://blog.csdn.net/qq_43967460?spm=1001.2101.3001.5343/" title="鄙人的csdn" target="_blank">鄙人的csdn</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="../../../../." rel="nofollow">STELLAR-SECRET.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="../../../../js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="../../../../js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="../../../../js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="../../../../js/smartresize.js?v=1.0.0"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/hibiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>